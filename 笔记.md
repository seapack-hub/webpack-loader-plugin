**1.loader**的执行顺序：从下到上，从右到左<br>
 pitch执行顺序：从上到下，从左到右,pitch先执行<br><br>
**2.同步和异步**<br>
 同步：使用return 或this.callback()方法,后两个参数选传<br>
 异步：使用this.async()<br><br>
**3.获取loader的配置options**<br>
webpack5之前使用loader-utils 中的 getOptions 方法。<br>
从 webpack 5 开始，this.getOptions 可以获取到 loader 上下文对象<br>
loader-utils 中3以上的版本剔除了getOptions方法。<br>
webpack中文文档：[https://webpack.docschina.org/api/loaders/#thisgetoptionsschema](https://webpack.docschina.org/api/loaders/#thisgetoptionsschema) <br><br>
**4.自定义babel-loader加载器**<br>
首先我们得理清楚Babel,babel-loader,webpack 之前的关系。<br>
Babel是编译工具，把高版本语法编译成低版本语法，或者将文件按自定义规则转换为js语法。通常是将ES6及以上版本的js语法转换成ES5等浏览器可直接识别的语法。<br>
webpack是打包工具，定义入口文件，将所有模块引入整理后，通过loader和plugin处理后，打包输出。<br>
babel-loader是辅助工具，让webpack通过babel-loader使用Babel.<br>
参考文件：[https://juejin.cn/post/6844904098303574023#heading-6](https://juejin.cn/post/6844904098303574023#heading-6) <br><br>

**5.Tapable 的介绍与使用**<br>
Tapable工具是 webpack 的一个核心工具，但也可用于其他地方， 以提供类似的插件接口。<br>
在 webpack 中的许多对象都扩展自 Tapable 类。 它对外暴露了 tap，tapAsync 和 tapPromise 等方法， 插件可以使用这些方法向 webpack 中注入自定义构建的步骤，这些步骤将在构建过程中触发。<br>
webpack官网地址：[https://webpack.docschina.org/api/plugins/#tapable](https://webpack.docschina.org/api/plugins/#tapable) <br>
tapable的github地址：[https://github.com/webpack/tapable#tapable](https://github.com/webpack/tapable#tapable) <br>
目前tapable暴露了很多Hook（钩子）类，为插件提供挂载的钩子
`const {
  SyncHook,
  SyncBailHook,
  SyncWaterfallHook,
  SyncLoopHook,
  AsyncParallelHook,
  AsyncParallelBailHook,
  AsyncSeriesHook,
  AsyncSeriesBailHook,
  AsyncSeriesWaterfallHook
} = require("tapable");` <br>
<img height="400" src="https://github.com/seapack-hub/webpack-loader-plugin/blob/master/public/images/img.png" width="800"/><br>
其中Sync代表同步，Async代表异步。 除此之外我们可以看到上面的 Hook 还带了其他关键字：Basic，Waterfall，Bail，Loop<br>
Basic hook（没有 Waterfall、Bail、Loop 在它的名字里面）：所有 tapped 的事件依次执行，互不干扰 <br>
Waterfall：与 Basic hook 不同的是它将返回值从每个函数传递到下一个函数 <br>
Bail：当任何 tapped 函数返回了任何值，bail hook 将停止执行其余的函数 <br>
Loop：若任一事件的返回值不为 undefined，则该事件链再次从头开始执行，直到所有 handler 均返回 undefined <br>

tapable 暴露出来的都是类方法，new 一个类方法获得我们需要的钩子。<br>
class 接受数组参数options，非必传。类方法会根据传参，接受同样数量的参数<br>
`const hook1 = new SyncHook(["arg1", "arg2", "arg3"]);` <br>
hook 类对外提供的方法 <br>
包括tap,tapAsync,tapPromise,call,callAsync,promise等。<br>
使用 tap/tapAsync/tapPromise 绑定钩子<br>
使用 call/callAsync/promise 执行绑定事件<br>
<img height="300" src="https://github.com/seapack-hub/webpack-loader-plugin/blob/master/public/images/img_1.png" width="600"/> <br>
<img height="400" src="https://github.com/seapack-hub/webpack-loader-plugin/blob/master/public/images/img_2.png" width="600"/> <br>
参考文章：[https://juejin.cn/post/6844903713312604173](https://juejin.cn/post/6844903713312604173) <br>
tap方法接收两个参数：option和fn(函数)<br>
`//源码
_tap(type, options, fn) {
	if (typeof options === "string") {
		options = {
		  name: options.trim()
	    };
	} else if (typeof options !== "object" || options === null) {
	  throw new Error("Invalid tap options");
	}
	if (typeof options.name !== "string" || options.name === "") {
	  throw new Error("Missing name for tap");
	}
	if (typeof options.context !== "undefined") {
	  deprecateContext();
	}
	options = Object.assign({ type, fn }, options);
	options = this._runRegisterInterceptors(options);
	this._insert(options);
}

tap(options, fn) {
    this._tap("sync", options, fn);
}` <br>

6.compiler与compilation  <br>
自定义plugin插件需要封装成class，_当webpack安装插件时，会对class进行实例化，并调用实例下的apply方法。_<br>
调用**apply**方法时候，会把**compiler**对象作为参数的形式传入，compiler是webpack底层编译对象的引用，开发者可以在apply方法实现中使用compiler。<br>
compiler 和 compilation 具体是什么?<br>
compiler 和 compilation 是 webpack 打包构建过程中的核心对象，记录着打包的关键信息，并提供打包流程中对应的钩子供开发者在plugin中使用。<br>
<img height="400" src="https://github.com/seapack-hub/webpack-loader-plugin/blob/master/public/images/img_3.png" width="900"/> <br>
compiler的执行过程及作用<br>
compiler 是 Compiler类的实例，webpack 从开始执行到结束，Compiler只会实例化一次。compiler 对象记录了 webpack 运行环境的所有的信息，插件可以通过它获取到 webpack 的配置信息，如entry、output、module等配置。<br>
compilation 的执行过程及作用<br>
Compilation类实例，提供了 webpack 大部分生命周期Hook API供自定义处理时做拓展使用。一个 compilation 对象记录了一次构建到生成资源过程中的信息，它储存了当前的模块资源、编译生成的资源、变化的文件、以及被跟踪依赖的状态信息。<br>
<img height="500" src="https://github.com/seapack-hub/webpack-loader-plugin/blob/master/public/images/img_4.png" width="400"/> <br>


 
